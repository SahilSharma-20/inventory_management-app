sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/ndc/BarcodeScanner"],function(t,e,o){"use strict";return t.extend("inv.mgm.inventorymanagement.controller.Outbound",{onInit(){this.getView().setModel(new sap.ui.model.json.JSONModel({selectedOutboundMaterial:"",outboundQuantity:"0",selectedOutboundLocation:""}))},onScanOutboundMaterial(){o.scan(t=>{if(!t.cancelled){this.getView().getModel().setProperty("/selectedOutboundMaterial",t.text)}},t=>{e.show("Scanning failed: "+t)})},onSubmitOutbound(){const t=this.getView().getModel();const o=t.getData();if(!o.selectedOutboundMaterial||!o.outboundQuantity||!o.selectedOutboundLocation){e.show("Please fill all fields");return}const n=this.getOwnerComponent().getModel("appModel");const a=n.getProperty("/stockData")||[];const s=a.findIndex(t=>t.material===o.selectedOutboundMaterial&&t.location===o.selectedOutboundLocation);const u=parseInt(o.outboundQuantity,10);if(s>-1){if(a[s].quantity>=u){a[s].quantity-=u;e.show("Outbound material processed.");if(a[s].quantity===0){a.splice(s,1)}}else{e.show("Not enough stock to process outbound.");return}}else{e.show("Material not found in stock at selected location.");return}n.setProperty("/stockData",a);this.onResetOutbound()},onResetOutbound(){this.getView().setModel(new sap.ui.model.json.JSONModel({selectedOutboundMaterial:"",outboundQuantity:"0",selectedOutboundLocation:""}))},onNavBack(){this.getOwnerComponent().getRouter().navTo("Main")}})});
//# sourceMappingURL=Outbound.controller.js.map